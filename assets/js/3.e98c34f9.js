(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{355:function(v,e,_){v.exports=_.p+"assets/img/git_flow_v1.de39896e.png"},356:function(v,e,_){v.exports=_.p+"assets/img/history_branch_v1.a31b6119.png"},357:function(v,e,_){v.exports=_.p+"assets/img/feature_branch.57eeca2a.png"},358:function(v,e,_){v.exports=_.p+"assets/img/release_branch.18f3dd64.png"},359:function(v,e,_){v.exports=_.p+"assets/img/bug_branch.f9cfb85c.png"},390:function(v,e,_){"use strict";_.r(e);var t=_(44),a=Object(t.a)({},(function(){var v=this,e=v.$createElement,t=v._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[t("h1",{attrs:{id:"git-flow工作流规范"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#git-flow工作流规范"}},[v._v("#")]),v._v(" Git-Flow工作流规范")]),v._v(" "),t("p",[v._v("大部分的团队都使用git作为版本库, 在涉及到多人协作，需要管理多个软件版本的情况下，定义良好的版本管理规范，可以让大型项目更有组织性，也可以提高成员协作效率")]),v._v(" "),t("p",[v._v("这里我们采取"),t("code",[v._v("Git-Flow")]),v._v("作为我们git工作流规范")]),v._v(" "),t("p",[t("code",[v._v("Git-Flow")]),v._v(" 工作流定义了更为严格的分支模型。定义了各种分支的"),t("code",[v._v("职责")]),v._v("和"),t("code",[v._v("使用场景")]),v._v("以及"),t("code",[v._v("生命周期")])]),v._v(" "),t("img",{attrs:{src:_(355)}}),v._v(" "),t("h2",{attrs:{id:"分支定义"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分支定义"}},[v._v("#")]),v._v(" 分支定义")]),v._v(" "),t("h3",{attrs:{id:"历史分支"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#历史分支"}},[v._v("#")]),v._v(" 历史分支")]),v._v(" "),t("img",{attrs:{src:_(356)}}),v._v(" "),t("p",[t("code",[v._v("Git-Flow")]),v._v("使用了两个分支来记录项目的历史记录，即"),t("code",[v._v("master")]),v._v("分支和"),t("code",[v._v("develop")]),v._v("分支。 "),t("code",[v._v("历史分支")]),v._v("是相对于"),t("code",[v._v("临时分支")]),v._v("而言的，"),t("code",[v._v("临时分支")]),v._v("有"),t("code",[v._v("功能分支")]),v._v("、 "),t("code",[v._v("修复分支")]),v._v("和"),t("code",[v._v("发布分支")]),v._v("，"),t("code",[v._v("发布分支")]),v._v("在发布完成后即会被删除")]),v._v(" "),t("ul",[t("li",[t("code",[v._v("master")]),v._v(" 这是一个稳定的分支, 又称为保护分支， 表示正式发布的历史, 所有对外正式版本发布都会合并到这里, 并打上版本标签。")]),v._v(" "),t("li",[t("code",[v._v("develop")]),v._v(" 开发分支用来整合功能分支， 表示最新的开发状态。等价于功能分支工作流的"),t("code",[v._v("master")]),v._v("分支")])]),v._v(" "),t("blockquote",[t("p",[v._v("注意每次合并到"),t("code",[v._v("master")]),v._v("都要打上"),t("code",[v._v("tag")]),v._v(", 方便定位")])]),v._v(" "),t("h4",{attrs:{id:"tag规范"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tag规范"}},[v._v("#")]),v._v(" tag规范")]),v._v(" "),t("p",[t("code",[v._v("v{APP_version}")]),v._v(" 例如 v1.0.1 版本遵循 版本规范")]),v._v(" "),t("h3",{attrs:{id:"功能分支"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#功能分支"}},[v._v("#")]),v._v(" 功能分支")]),v._v(" "),t("p",[t("code",[v._v("功能分支")]),v._v("是从"),t("code",[v._v("开发分支")]),v._v("中分叉出来的, 当新功能完成后，再合并回"),t("code",[v._v("开发分支")])]),v._v(" "),t("img",{attrs:{src:_(357)}}),v._v(" "),t("h4",{attrs:{id:"功能分支命名规范"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#功能分支命名规范"}},[v._v("#")]),v._v(" 功能分支命名规范")]),v._v(" "),t("ul",[t("li",[v._v("feature/${name}  name为功能名称, 例如搜索模块 "),t("code",[v._v("feature/search")])]),v._v(" "),t("li",[v._v("feature/${dev_name}_${date} dev_name为开发着姓名，采取统一小些字母，date为分出分支的日期，以MO门户为例 "),t("code",[v._v("feature/chenhang_20190916")]),v._v(", 增加日期名也为防止同时分出多个功能分支开发")])]),v._v(" "),t("h4",{attrs:{id:"合并规范"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#合并规范"}},[v._v("#")]),v._v(" 合并规范")]),v._v(" "),t("p",[v._v("当feature分支迭代稳定，并自测通过后，发起Pull Request，项目负责人进行代码Review后合并到develop中，此时feature分支的生命周期就结束了，后续Bug修复从develop分支拉取代码")]),v._v(" "),t("h3",{attrs:{id:"发布分支"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#发布分支"}},[v._v("#")]),v._v(" 发布分支")]),v._v(" "),t("p",[v._v("一旦到了发布分支， 比如"),t("code",[v._v("开发分支")]),v._v("积累到足够的功能或者到了指定的发布日期, 就从"),t("code",[v._v("开发分支")]),v._v("上分叉出来一个"),t("code",[v._v("发布分支")]),v._v(", 开始"),t("code",[v._v("发布循环")]),v._v(", 后续新的功能也不会加到这个分支，此分支只当作Bug修复，文档生成和其他面向发布的任务")]),v._v(" "),t("img",{attrs:{src:_(358)}}),v._v(" "),t("p",[v._v("当"),t("code",[v._v("发布分支")]),v._v("稳定到足以合并到"),t("code",[v._v("master")]),v._v("的时候，"),t("code",[v._v("发布分支")]),v._v("的生命周期也结束了，这时候我们将稳定的发布分支合并到"),t("code",[v._v("master")]),v._v("分支，然后打上 "),t("code",[v._v("tag")]),v._v(" 版本号；接着还需要将"),t("code",[v._v("发布分支")]),v._v("合并回"),t("code",[v._v("开发分支")])]),v._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[v._v("TIP")]),v._v(" "),t("p",[v._v("该不该保留发布分支？\n你可以删掉它，因为在 master 上打了 tag，即使你删掉了发布分支，你也可以很方便的重新创建一个:")]),v._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[v._v("# 基于tag v1.0. 0创建一个分支")]),v._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[v._v("git")]),v._v(" checkout -b release/v1.0.0 v1.0.0\n")])])])]),v._v(" "),t("h3",{attrs:{id:"bug修复分支"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#bug修复分支"}},[v._v("#")]),v._v(" bug修复分支")]),v._v(" "),t("p",[t("code",[v._v("修复分支")]),v._v("主要职责是快速给"),t("code",[v._v("生成版本")]),v._v("打补丁，这些Bug可能比较紧急，而且跨越多个分支，我们通过新建一个"),t("code",[v._v("补丁分支")]),v._v(", 快速修复"),t("code",[v._v("master")]),v._v("上的bug, 然后合并到"),t("code",[v._v("master")]),v._v("分支和"),t("code",[v._v("开发分支")]),v._v("，并重新为"),t("code",[v._v("master")]),v._v("分支打上tag")]),v._v(" "),t("img",{attrs:{src:_(359)}}),v._v(" "),t("h2",{attrs:{id:"示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[v._v("#")]),v._v(" 示例")]),v._v(" "),t("p",[v._v("以"),t("a",{attrs:{href:"http://gitlab.adc.com/oppo-front/new-mo-portal.git",target:"_blank",rel:"noopener noreferrer"}},[t("code",[v._v("MO门户")]),t("OutboundLink")],1),v._v("为例")]),v._v(" "),t("p",[v._v("MO门户开发流程")]),v._v(" "),t("ol",[t("li",[v._v("从"),t("code",[v._v("develop")]),v._v("分支分出"),t("code",[v._v("feature")]),v._v("分支，分支命名参考"),t("code",[v._v("功能分支-功能分支命名规范")]),v._v("。")]),v._v(" "),t("li",[v._v("在"),t("code",[v._v("feature")]),v._v("分支开发完成功能并自测通过后，提交到远程"),t("code",[v._v("feature")]),v._v("分支，并向"),t("code",[v._v("develop")]),v._v("分支发起合并请。")]),v._v(" "),t("li",[v._v("由项目负责人review代码，并确认后合并到"),t("code",[v._v("develop")]),v._v("分支, 如果代码不符合规范或有明显错误，关闭合并请求，由功能分支开发负责人修改自测后再提交合并请求")]),v._v(" "),t("li",[v._v("当代码合并到"),t("code",[v._v("develop")]),v._v("分支，此功能分支生命周期结束。此功能模块开发阶段完成")])]),v._v(" "),t("p",[v._v("MO门户测试环境发布流程：")]),v._v(" "),t("ol",[t("li",[v._v("从"),t("code",[v._v("develop")]),v._v("分支分出"),t("code",[v._v("release")]),v._v("分支，以"),t("code",[v._v("release-${version}")]),v._v("作为分支名作为发布分支")]),v._v(" "),t("li",[v._v("修改测试环境配置，打包发布测试环境")]),v._v(" "),t("li",[v._v("如果修复此版本BUG，从"),t("code",[v._v("release")]),v._v("分支分出"),t("code",[v._v("fix")]),v._v("分支进行BUG修复")])]),v._v(" "),t("p",[v._v("MO门户正式环境发布流程：")]),v._v(" "),t("ol",[t("li",[v._v("当"),t("code",[v._v("release")]),v._v("版本稳定后，就可以用此版本打包正式环境发布，并将此代码合并到"),t("code",[v._v("master")]),v._v("分支，并在"),t("code",[v._v("master")]),v._v("分支根据当前版本打上Tag")]),v._v(" "),t("li",[v._v("将"),t("code",[v._v("release")]),v._v("分支合并到"),t("code",[v._v("develop")]),v._v("分支中，此分支保留只做正式环境紧急BUG修复")]),v._v(" "),t("li",[v._v("当正式环境出现需要紧急修复的BUG时, 从此分支上分出修复分支，修复完成打包发布后，将代码合并到"),t("code",[v._v("master")]),v._v("分支和"),t("code",[v._v("develop")]),v._v("分支")])]),v._v(" "),t("h2",{attrs:{id:"git提交信息规范"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#git提交信息规范"}},[v._v("#")]),v._v(" Git提交信息规范")]),v._v(" "),t("p",[v._v("一个好的提交信息, 会帮助你提高项目的整体质量")]),v._v(" "),t("ul",[t("li",[t("p",[v._v("Why")]),v._v(" "),t("ul",[t("li",[v._v("格式统一的提交信息可以帮助自动化生成Changelog")]),v._v(" "),t("li",[v._v("版本库不只是存放代码的仓库, 也记录项目的开发记录. 这些记录应该可以帮助后来者快速地学习和回顾代码. 也应该方便其他协作者review你的代码")])])]),v._v(" "),t("li",[t("p",[v._v("必要信息")]),v._v(" "),t("ul",[t("li",[v._v("为什么要进行这次提交？\n"),t("ul",[t("li",[v._v("提交改变了什么, 让其他reviewer更容易审核代码和忽略无关的改变")])])]),v._v(" "),t("li",[v._v("如何解决的问题?\n"),t("ul",[t("li",[v._v("问题是什么原因引起的")]),v._v(" "),t("li",[v._v("简短说明使用什么方式，策略修复了问题")])])]),v._v(" "),t("li",[v._v("变化可能影响哪些地方\n"),t("ul",[t("li",[v._v("说明变动功能的细节")])])])])])]),v._v(" "),t("h3",{attrs:{id:"格式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#格式"}},[v._v("#")]),v._v(" 格式")]),v._v(" "),t("p",[v._v("采用angular的提交规范，在这个规范的基础上支持"),t("code",[v._v("emoji")]),v._v("进行修饰")]),v._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[v._v("<")]),v._v("type"),t("span",{pre:!0,attrs:{class:"token operator"}},[v._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[v._v("<")]),v._v("score"),t("span",{pre:!0,attrs:{class:"token operator"}},[v._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(")")]),v._v(": "),t("span",{pre:!0,attrs:{class:"token operator"}},[v._v("<")]),v._v("subject"),t("span",{pre:!0,attrs:{class:"token operator"}},[v._v(">")]),v._v("\n\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[v._v("<")]),v._v("body"),t("span",{pre:!0,attrs:{class:"token operator"}},[v._v(">")]),v._v("\n\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[v._v("<")]),v._v("footer"),t("span",{pre:!0,attrs:{class:"token operator"}},[v._v(">")]),v._v("\n")])])]),t("h4",{attrs:{id:"header"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#header"}},[v._v("#")]),v._v(" header")]),v._v(" "),t("ul",[t("li",[v._v("type: 说明commit的类别，可以配合emoji使用，类型如下：\n"),t("ul",[t("li",[t("b",[v._v("featrue")]),v._v(": 引入新功能")]),v._v(" "),t("li",[t("b",[v._v("fix")]),v._v(": 修复bug")]),v._v(" "),t("li",[t("b",[v._v("docs")]),v._v(": 文档")]),v._v(" "),t("li",[t("b",[v._v("style")]),v._v(": 优化了项目结构或者代码格式")]),v._v(" "),t("li",[t("b",[v._v("test")]),v._v(": 增加测试")]),v._v(" "),t("li",[t("b",[v._v("refactor")]),v._v(": 代码重构，代码重构不涉及新功能和Bug修复，不影响原有功能")]),v._v(" "),t("li",[t("b",[v._v("chore")]),v._v(": 构建过程，辅助工具升级，如增加依赖，升级构建工具")]),v._v(" "),t("li",[t("b",[v._v("perf")]),v._v(": 性能优化")]),v._v(" "),t("li",[t("b",[v._v("revert")]),v._v(": revert之前的commit")]),v._v(" "),t("li",[t("b",[v._v("build或release")]),v._v(": 构建或发布版本")]),v._v(" "),t("li",[t("b",[v._v("safe")]),v._v(": 修复安全问题")])])]),v._v(" "),t("li",[v._v("scope: 可选，说明提交影响的范围，例如样式，后端接口，逻辑层")]),v._v(" "),t("li",[v._v("subject: 提交目的的简短描述，动词开头")])]),v._v(" "),t("h4",{attrs:{id:"body"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#body"}},[v._v("#")]),v._v(" body")]),v._v(" "),t("p",[v._v("可选，对本次提交的详细描述，如果变动很简单，可以省略")]),v._v(" "),t("h4",{attrs:{id:"footer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#footer"}},[v._v("#")]),v._v(" footer")]),v._v(" "),t("p",[v._v("可选，只用于说明不兼容变动或关闭Issue")])])}),[],!1,null,null,null);e.default=a.exports}}]);