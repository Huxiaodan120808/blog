<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Git-Flow工作流规范 | Umeet-blog</title>
    <meta name="generator" content="VuePress 1.5.0">
    
    <meta name="description" content="集合脚手架, Vue开发模版, 代码规范, 工作流规范, 前端相关组件, 接口管理平台系统等, 旨在统一前端开发流程, 开发规范, 减少前端重复造轮子, 提升前端开发效率和代码质量">
    <link rel="preload" href="./assets/css/0.styles.8c3c07e4.css" as="style"><link rel="preload" href="./assets/js/app.6bfa0bc3.js" as="script"><link rel="preload" href="./assets/js/2.a7617878.js" as="script"><link rel="preload" href="./assets/js/3.5e54e78d.js" as="script"><link rel="prefetch" href="./assets/js/10.3b2d36ae.js"><link rel="prefetch" href="./assets/js/11.ef3ee154.js"><link rel="prefetch" href="./assets/js/12.e959da27.js"><link rel="prefetch" href="./assets/js/13.ced5678e.js"><link rel="prefetch" href="./assets/js/14.d196a903.js"><link rel="prefetch" href="./assets/js/15.eda7f2d2.js"><link rel="prefetch" href="./assets/js/16.5c7c40af.js"><link rel="prefetch" href="./assets/js/17.2b19feb1.js"><link rel="prefetch" href="./assets/js/18.ea96c925.js"><link rel="prefetch" href="./assets/js/19.fd8f6699.js"><link rel="prefetch" href="./assets/js/20.8a1ae631.js"><link rel="prefetch" href="./assets/js/21.eba73d0e.js"><link rel="prefetch" href="./assets/js/22.3a7a6513.js"><link rel="prefetch" href="./assets/js/23.2ec401bf.js"><link rel="prefetch" href="./assets/js/24.ff27afea.js"><link rel="prefetch" href="./assets/js/25.6f8d04d8.js"><link rel="prefetch" href="./assets/js/26.c512dad5.js"><link rel="prefetch" href="./assets/js/27.8d69e674.js"><link rel="prefetch" href="./assets/js/28.5b6e4c9e.js"><link rel="prefetch" href="./assets/js/29.1b3f5088.js"><link rel="prefetch" href="./assets/js/30.292cd2a0.js"><link rel="prefetch" href="./assets/js/31.aa03a27a.js"><link rel="prefetch" href="./assets/js/32.3bdfabf4.js"><link rel="prefetch" href="./assets/js/33.97fb4d32.js"><link rel="prefetch" href="./assets/js/34.880b60e6.js"><link rel="prefetch" href="./assets/js/35.02990515.js"><link rel="prefetch" href="./assets/js/4.69398dec.js"><link rel="prefetch" href="./assets/js/5.b1c50692.js"><link rel="prefetch" href="./assets/js/6.78b1bcbe.js"><link rel="prefetch" href="./assets/js/7.d06272b1.js"><link rel="prefetch" href="./assets/js/8.3ba580a9.js"><link rel="prefetch" href="./assets/js/9.b9cf7884.js">
    <link rel="stylesheet" href="./assets/css/0.styles.8c3c07e4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">Umeet-blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/guide/" class="nav-link router-link-active">
  指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="功能" class="dropdown-title"><span class="title">功能</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/components/richtext.html" class="nav-link">
  富文本
</a></li><li class="dropdown-item"><!----> <a href="/blog/components/clipboard.html" class="nav-link">
  复制粘贴
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="相关系统" class="dropdown-title"><span class="title">相关系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/ecology/scaffold.html" class="nav-link">
  脚手架工具
</a></li><li class="dropdown-item"><!----> <a href="/blog/ecology/onpm.html" class="nav-link">
  NPM镜像仓库
</a></li><li class="dropdown-item"><!----> <a href="/blog/ecology/yapi.html" class="nav-link">
  接口管理平台
</a></li><li class="dropdown-item"><!----> <a href="/blog/ecology/sentry.html" class="nav-link">
  前端错误统计平台
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/guide/" class="nav-link router-link-active">
  指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="功能" class="dropdown-title"><span class="title">功能</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/components/richtext.html" class="nav-link">
  富文本
</a></li><li class="dropdown-item"><!----> <a href="/blog/components/clipboard.html" class="nav-link">
  复制粘贴
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="相关系统" class="dropdown-title"><span class="title">相关系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/ecology/scaffold.html" class="nav-link">
  脚手架工具
</a></li><li class="dropdown-item"><!----> <a href="/blog/ecology/onpm.html" class="nav-link">
  NPM镜像仓库
</a></li><li class="dropdown-item"><!----> <a href="/blog/ecology/yapi.html" class="nav-link">
  接口管理平台
</a></li><li class="dropdown-item"><!----> <a href="/blog/ecology/sentry.html" class="nav-link">
  前端错误统计平台
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>开发指南</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/guide/common.html" class="sidebar-link">基础</a></li><li><a href="/blog/guide/pc.html" class="sidebar-link">PC端开发</a></li><li><a href="/blog/guide/mobile.html" class="sidebar-link">移动端开发</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>多环境配置</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/guide/env-standard/env-build.html" class="sidebar-link">Vue多环境配置</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>代码规范</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/guide/code-standard/html.html" class="sidebar-link">HTML编码规范</a></li><li><a href="/blog/guide/code-standard/css.html" class="sidebar-link">CSS编码规范</a></li><li><a href="/blog/guide/code-standard/js.html" class="sidebar-link">JS编码规范</a></li><li><a href="/blog/guide/code-standard/vue.html" class="sidebar-link">Vue编码规范</a></li><li><a href="/blog/guide/code-standard/eslint.html" class="sidebar-link">ESLint规范</a></li><li><a href="/blog/guide/code-standard/filename.html" class="sidebar-link">命名规范</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>工作流规范</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/guide/dev-standard/project-version.html" class="sidebar-link">版本规范</a></li><li><a href="/blog/guide/dev-standard/git-version.html" class="active sidebar-link">Git-Flow工作流规范</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/guide/dev-standard/git-version.html#分支定义" class="sidebar-link">分支定义</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/guide/dev-standard/git-version.html#历史分支" class="sidebar-link">历史分支</a></li><li class="sidebar-sub-header"><a href="/blog/guide/dev-standard/git-version.html#功能分支" class="sidebar-link">功能分支</a></li><li class="sidebar-sub-header"><a href="/blog/guide/dev-standard/git-version.html#发布分支" class="sidebar-link">发布分支</a></li><li class="sidebar-sub-header"><a href="/blog/guide/dev-standard/git-version.html#bug修复分支" class="sidebar-link">bug修复分支</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/guide/dev-standard/git-version.html#示例" class="sidebar-link">示例</a></li><li class="sidebar-sub-header"><a href="/blog/guide/dev-standard/git-version.html#git提交信息规范" class="sidebar-link">Git提交信息规范</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/guide/dev-standard/git-version.html#格式" class="sidebar-link">格式</a></li></ul></li></ul></li><li><a href="/blog/guide/cooperation-standard/cooperation.html" class="sidebar-link">前后端协作流程规范</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="git-flow工作流规范"><a href="#git-flow工作流规范" class="header-anchor">#</a> Git-Flow工作流规范</h1> <p>大部分的团队都使用git作为版本库, 在涉及到多人协作，需要管理多个软件版本的情况下，定义良好的版本管理规范，可以让大型项目更有组织性，也可以提高成员协作效率</p> <p>这里我们采取<code>Git-Flow</code>作为我们git工作流规范</p> <p><code>Git-Flow</code> 工作流定义了更为严格的分支模型。定义了各种分支的<code>职责</code>和<code>使用场景</code>以及<code>生命周期</code></p> <img src="./assets/img/git_flow_v1.de39896e.png"> <h2 id="分支定义"><a href="#分支定义" class="header-anchor">#</a> 分支定义</h2> <h3 id="历史分支"><a href="#历史分支" class="header-anchor">#</a> 历史分支</h3> <img src="./assets/img/history_branch_v1.a31b6119.png"> <p><code>Git-Flow</code>使用了两个分支来记录项目的历史记录，即<code>master</code>分支和<code>develop</code>分支。 <code>历史分支</code>是相对于<code>临时分支</code>而言的，<code>临时分支</code>有<code>功能分支</code>、 <code>修复分支</code>和<code>发布分支</code>，<code>发布分支</code>在发布完成后即会被删除</p> <ul><li><code>master</code> 这是一个稳定的分支, 又称为保护分支， 表示正式发布的历史, 所有对外正式版本发布都会合并到这里, 并打上版本标签。</li> <li><code>develop</code> 开发分支用来整合功能分支， 表示最新的开发状态。等价于功能分支工作流的<code>master</code>分支</li></ul> <blockquote><p>注意每次合并到<code>master</code>都要打上<code>tag</code>, 方便定位</p></blockquote> <h4 id="tag规范"><a href="#tag规范" class="header-anchor">#</a> tag规范</h4> <p><code>v{APP_version}</code> 例如 v1.0.1 版本遵循 版本规范</p> <h3 id="功能分支"><a href="#功能分支" class="header-anchor">#</a> 功能分支</h3> <p><code>功能分支</code>是从<code>开发分支</code>中分叉出来的, 当新功能完成后，再合并回<code>开发分支</code></p> <img src="./assets/img/feature_branch.57eeca2a.png"> <h4 id="功能分支命名规范"><a href="#功能分支命名规范" class="header-anchor">#</a> 功能分支命名规范</h4> <ul><li>feature/${name}  name为功能名称, 例如搜索模块 <code>feature/search</code></li> <li>feature/${dev_name}_${date} dev_name为开发着姓名，采取统一小些字母，date为分出分支的日期，以MO门户为例 <code>feature/chenhang_20190916</code>, 增加日期名也为防止同时分出多个功能分支开发</li></ul> <h4 id="合并规范"><a href="#合并规范" class="header-anchor">#</a> 合并规范</h4> <p>当feature分支迭代稳定，并自测通过后，发起Pull Request，项目负责人进行代码Review后合并到develop中，此时feature分支的生命周期就结束了，后续Bug修复从develop分支拉取代码</p> <h3 id="发布分支"><a href="#发布分支" class="header-anchor">#</a> 发布分支</h3> <p>一旦到了发布分支， 比如<code>开发分支</code>积累到足够的功能或者到了指定的发布日期, 就从<code>开发分支</code>上分叉出来一个<code>发布分支</code>, 开始<code>发布循环</code>, 后续新的功能也不会加到这个分支，此分支只当作Bug修复，文档生成和其他面向发布的任务</p> <img src="./assets/img/release_branch.18f3dd64.png"> <p>当<code>发布分支</code>稳定到足以合并到<code>master</code>的时候，<code>发布分支</code>的生命周期也结束了，这时候我们将稳定的发布分支合并到<code>master</code>分支，然后打上 <code>tag</code> 版本号；接着还需要将<code>发布分支</code>合并回<code>开发分支</code></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>该不该保留发布分支？
你可以删掉它，因为在 master 上打了 tag，即使你删掉了发布分支，你也可以很方便的重新创建一个:</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 基于tag v1.0. 0创建一个分支</span>
$ <span class="token function">git</span> checkout -b release/v1.0.0 v1.0.0
</code></pre></div></div> <h3 id="bug修复分支"><a href="#bug修复分支" class="header-anchor">#</a> bug修复分支</h3> <p><code>修复分支</code>主要职责是快速给<code>生成版本</code>打补丁，这些Bug可能比较紧急，而且跨越多个分支，我们通过新建一个<code>补丁分支</code>, 快速修复<code>master</code>上的bug, 然后合并到<code>master</code>分支和<code>开发分支</code>，并重新为<code>master</code>分支打上tag</p> <img src="./assets/img/bug_branch.f9cfb85c.png"> <h2 id="示例"><a href="#示例" class="header-anchor">#</a> 示例</h2> <p>以<a href="http://gitlab.adc.com/oppo-front/new-mo-portal.git" target="_blank" rel="noopener noreferrer"><code>MO门户</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>为例</p> <p>MO门户开发流程</p> <ol><li>从<code>develop</code>分支分出<code>feature</code>分支，分支命名参考<code>功能分支-功能分支命名规范</code>。</li> <li>在<code>feature</code>分支开发完成功能并自测通过后，提交到远程<code>feature</code>分支，并向<code>develop</code>分支发起合并请。</li> <li>由项目负责人review代码，并确认后合并到<code>develop</code>分支, 如果代码不符合规范或有明显错误，关闭合并请求，由功能分支开发负责人修改自测后再提交合并请求</li> <li>当代码合并到<code>develop</code>分支，此功能分支生命周期结束。此功能模块开发阶段完成</li></ol> <p>MO门户测试环境发布流程：</p> <ol><li>从<code>develop</code>分支分出<code>release</code>分支，以<code>release-${version}</code>作为分支名作为发布分支</li> <li>修改测试环境配置，打包发布测试环境</li> <li>如果修复此版本BUG，从<code>release</code>分支分出<code>fix</code>分支进行BUG修复</li></ol> <p>MO门户正式环境发布流程：</p> <ol><li>当<code>release</code>版本稳定后，就可以用此版本打包正式环境发布，并将此代码合并到<code>master</code>分支，并在<code>master</code>分支根据当前版本打上Tag</li> <li>将<code>release</code>分支合并到<code>develop</code>分支中，此分支保留只做正式环境紧急BUG修复</li> <li>当正式环境出现需要紧急修复的BUG时, 从此分支上分出修复分支，修复完成打包发布后，将代码合并到<code>master</code>分支和<code>develop</code>分支</li></ol> <h2 id="git提交信息规范"><a href="#git提交信息规范" class="header-anchor">#</a> Git提交信息规范</h2> <p>一个好的提交信息, 会帮助你提高项目的整体质量</p> <ul><li><p>Why</p> <ul><li>格式统一的提交信息可以帮助自动化生成Changelog</li> <li>版本库不只是存放代码的仓库, 也记录项目的开发记录. 这些记录应该可以帮助后来者快速地学习和回顾代码. 也应该方便其他协作者review你的代码</li></ul></li> <li><p>必要信息</p> <ul><li>为什么要进行这次提交？
<ul><li>提交改变了什么, 让其他reviewer更容易审核代码和忽略无关的改变</li></ul></li> <li>如何解决的问题?
<ul><li>问题是什么原因引起的</li> <li>简短说明使用什么方式，策略修复了问题</li></ul></li> <li>变化可能影响哪些地方
<ul><li>说明变动功能的细节</li></ul></li></ul></li></ul> <h3 id="格式"><a href="#格式" class="header-anchor">#</a> 格式</h3> <p>采用angular的提交规范，在这个规范的基础上支持<code>emoji</code>进行修饰</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token operator">&lt;</span>type<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>score<span class="token operator">&gt;</span><span class="token punctuation">)</span>: <span class="token operator">&lt;</span>subject<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>footer<span class="token operator">&gt;</span>
</code></pre></div><h4 id="header"><a href="#header" class="header-anchor">#</a> header</h4> <ul><li>type: 说明commit的类别，可以配合emoji使用，类型如下：
<ul><li><b>featrue</b>: 引入新功能</li> <li><b>fix</b>: 修复bug</li> <li><b>docs</b>: 文档</li> <li><b>style</b>: 优化了项目结构或者代码格式</li> <li><b>test</b>: 增加测试</li> <li><b>refactor</b>: 代码重构，代码重构不涉及新功能和Bug修复，不影响原有功能</li> <li><b>chore</b>: 构建过程，辅助工具升级，如增加依赖，升级构建工具</li> <li><b>perf</b>: 性能优化</li> <li><b>revert</b>: revert之前的commit</li> <li><b>build或release</b>: 构建或发布版本</li> <li><b>safe</b>: 修复安全问题</li></ul></li> <li>scope: 可选，说明提交影响的范围，例如样式，后端接口，逻辑层</li> <li>subject: 提交目的的简短描述，动词开头</li></ul> <h4 id="body"><a href="#body" class="header-anchor">#</a> body</h4> <p>可选，对本次提交的详细描述，如果变动很简单，可以省略</p> <h4 id="footer"><a href="#footer" class="header-anchor">#</a> footer</h4> <p>可选，只用于说明不兼容变动或关闭Issue</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/16/2020, 3:57:46 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/guide/dev-standard/project-version.html" class="prev">
        版本规范
      </a></span> <span class="next"><a href="/blog/guide/cooperation-standard/cooperation.html">
        前后端协作流程规范
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="./assets/js/app.6bfa0bc3.js" defer></script><script src="./assets/js/2.a7617878.js" defer></script><script src="./assets/js/3.5e54e78d.js" defer></script>
  </body>
</html>
